<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Update Record</ion-title>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content padding>

  <form novalidate="novalidate" onsubmit="return false;" class="searchbox">
    <div role="search" class="searchbox__wrapper">
      <input id="search-input" type="search" name="search" placeholder="Search for a movie" autocomplete="off" required="required" class="searchbox__input">
      <button type="submit" title="Submit your search query." class="searchbox__submit" >
        <svg role="img" aria-label="Search">
          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sbx-icon-search-13"></use>
        </svg>
      </button>
      <button type="reset" title="Clear the search query." class="searchbox__reset hide">
        <svg role="img" aria-label="Reset">
          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#sbx-icon-clear-3"></use>
        </svg>
      </button>
    </div>
  </form>

  <!--<div class="svg-icons" style="height: 0; width: 0; position: absolute; visibility: hidden">-->
  <!--<svg xmlns="http://www.w3.org/2000/svg">-->
  <!--<symbol id="sbx-icon-clear-3" viewBox="0 0 40 40"><path d="M16.228 20L1.886 5.657 0 3.772 3.772 0l1.885 1.886L20 16.228 34.343 1.886 36.228 0 40 3.772l-1.886 1.885L23.772 20l14.342 14.343L40 36.228 36.228 40l-1.885-1.886L20 23.772 5.657 38.114 3.772 40 0 36.228l1.886-1.885L16.228 20z" fill-rule="evenodd"/></symbol>-->
  <!--<symbol id="sbx-icon-search-13" viewBox="0 0 40 40"><path d="M26.806 29.012a16.312 16.312 0 0 1-10.427 3.746C7.332 32.758 0 25.425 0 16.378 0 7.334 7.333 0 16.38 0c9.045 0 16.378 7.333 16.378 16.38 0 3.96-1.406 7.593-3.746 10.426L39.547 37.34c.607.608.61 1.59-.004 2.203a1.56 1.56 0 0 1-2.202.004L26.807 29.012zm-10.427.627c7.322 0 13.26-5.938 13.26-13.26 0-7.324-5.938-13.26-13.26-13.26-7.324 0-13.26 5.936-13.26 13.26 0 7.322 5.936 13.26 13.26 13.26z" fill-rule="evenodd"/></symbol>-->
  <!--</svg>-->
  <!--</div>-->

  <form [formGroup]="edit_item_form" (submit)="updateItem(edit_item_form.value)">
    <ion-item>
      <ion-label color="primary" position="floating">Name of Movie/TV Show</ion-label>
      <ion-input type="text" formControlName="title" required></ion-input>
    </ion-item>
    <ion-item>
      <ion-label color="primary" position="floating">Season, Episode and/or Other Information</ion-label>
      <ion-input type="text" formControlName="description" required></ion-input>
    </ion-item>
    <ion-button class="submit-btn" expand="block" type="submit" [disabled]="!edit_item_form.valid">Update</ion-button>
  </form>

  <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
  <script src="//cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>

  <script>
      var client = algoliasearch("latency", "6be0576ff61c053d5f9a3225e2a90f76")
      var index = client.initIndex('movies');
      var myAutocomplete = autocomplete('#search-input', {hint: false}, [
          {
              source: autocomplete.sources.hits(index, {hitsPerPage: 5}),
              displayKey: 'title',
              templates: {
                  suggestion: function(suggestion) {
                      var sugTemplate = "<img src='"+ suggestion.image +"'/><span>"+ suggestion._highlightResult.title.value +"</span>"
                      return sugTemplate;
                  }
              }
          }
      ]).on('autocomplete:selected', function(event, suggestion, dataset) {
          console.log(suggestion, dataset);
      });

      document.querySelector(".searchbox [type='reset']").addEventListener("click", function() {
          document.querySelector(".aa-input").focus();
          this.classList.add("hide");
          myAutocomplete.autocomplete.setVal("");
      });

      document.querySelector("#search-input").addEventListener("keyup", function() {
          var searchbox = document.querySelector(".aa-input");
          var reset = document.querySelector(".searchbox [type='reset']");
          if (searchbox.value.length === 0){
              reset.classList.add("hide");
          } else {
              reset.classList.remove('hide');
          }
      });
  </script>

</ion-content>
